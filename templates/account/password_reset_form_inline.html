{% load i18n %}

{% if request.GET.next %}
    <form class="form-signin" role="form" method="post" action="{% url 'account_reset_password' %}?{{ request.GET.urlencode }}" ng-non-bindable>
{% else %}
    <form class="form-signin" role="form" method="post" action="{% url 'account_reset_password' %}" ng-non-bindable>
{% endif %}

    {% csrf_token %}
    {% if form.non_field_errors %}
    <div class="errors alert alert-danger">{{ form.non_field_errors }}</div>
    {%  endif %}

    <div class="form-group">
        <label for="password-reset-id_email">{% trans "Email Address" %}</label>
        <input id="password-reset-id_email" name="email" type="email" class="form-control" placeholder="{% trans 'Enter your email address' %}" value="{{ form.email.value|default_if_none:"" }}" required autofocus>
        {% if form.email.errors %}
        <div class="errors alert alert-danger">{{ form.email.errors }}</div>
        {% endif %}

    </div>

    <div class="form-action btn-wrapper">
        {% if display_cancel %}
        <button class="btn btn-primary btn-lg btn-orange" type="submit">{% trans 'Reset password' %}</button>
        <button class="btn btn-default btn-lg btn-cancel" data-dismiss="modal" type="button">{% trans 'Cancel' %}</button>
        {% else %}
        <button class="btn btn-primary btn-lg btn-block btn-orange" type="submit">{% trans "Reset password" %}</button>
        {% endif %}
    </div>

</form>

<div class="link-footer text-center">
    {% if display_cancel %}
    <a onclick="$('#modal-register, #modal-password-reset').modal('hide')" class="link-signup" href="#" data-target="#modal-login" data-toggle="modal">{% trans "‹ Back to log in" %}</a>
    {% else %}
    <a class="link-signup" href="{% url 'account_login' %}?{{ request.GET.urlencode }}">{% trans "‹ Back to log in" %}</a>
    {% endif %}
</div>
